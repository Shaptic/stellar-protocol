## Preamble

```
SEP: To Be Assigned
Title: Non-Fungible Token Standard
Author: George Kudrayvtsev <george@stellar.org>
Track: Standard
Status: Draft
Created: 2021-01-31
Updated: 2021-01-31
Version: 0.1.0
Discussion: TBD
```

## Simple Summary
This SEP defines a standard interface to describe non-fungible tokens (NFTs) on the Stellar network, including a distribution mechanism and metadata fields. It draws inspiration from the [EIP-721 standard](https://eips.ethereum.org/EIPS/eip-721).


## Motivation
A standard interface for NFTs allows ecosystem applications (such as wallets or marketplaces) to create, view, or otherwise work with any NFT on Stellar.


## Abstract
Non-fungible tokens (NFTs) can describe many types of assets, from digital collectibles to physical items. We should also define a standard issuance model to explain how NFTs can and should be issued on the network. In order to maintain compatibility across the Stellar ecosystem and beyond, we need a standard way to describe and define them that is agnostic of what the NFT actually describes.


## Specification
The protocol defines an [issuance model](#issuance-model) that defines how NFT assets are issued on Stellar, and a [metadata specification](#nft-metadata-specification) that defines how data about the NFT is captured in a way that Stellar guarantees is immutable.

### Issuance Model
Given an arbitrary digital asset, here's how issuance typically works:

  1. An account is created specifically to represent the NFT in the Stellar ledger.
  2. The account configures itself with metadata describing the NFT.
  3. The account issues a new Stellar asset representing ownership over said NFT.
  4. Any account holding that asset lays claim to the NFT.

Ownership of the token directly conveys ownership of a unit of the NFT, however that may be defined. Other scenarios such as locking down the issuing account to avoid supply increases, ownership transfers via payments, etc. are built on top of this basic model and are thus extraneous to this SEP.

Note also that this SEP does not address concerns around immutability. While there is an optional checksum component (addressed later), the account itself is free to modify the data at-will if it is not locked.

### NFT Specification
This specification is partially inspired by Ethereum's [EIP-721 specification](https://eips.ethereum.org/EIPS/eip-721#specification) on NFTs; however, it is generalized to arbitrary asset types (i.e. not necessarily images).

In order to minimize the costs of on-chain storage, we have multiple levels of indirection of NFT metadata. The only thing the NFT account stores on-chain is a description of where to find the metadata.

#### NFT Account Description
A proper NFT account should specify its `homedomain`. It should also configure the asset in its domain's `stellar.toml` file (see [SEP-1](https://stellar.org/sep-1#currency-documentation)) if appropriate.

There's only one required field on the account itself:

| Field       | Purpose |
| ----------- | ------- |
| `type`      | Describes how the "first hop" of metadata is defined, standard values include `ipfshash` and `uri` |

The two possible values for the `type` field describe two standard ways to store the metadata, and the details will be in a data entry corresponding to this value. In other words, `type: ipfshash` means that you should look under the `ipfshash` key data entry which further defines how to find the metadata.

All other values for the `type` are considered non-standard until they are approved for inclusion within this SEP.

Fields should be stored as simple key-value pairs within an account's data entries. The standard limitations of `ManageDataOp` apply: field names and their values can only be 64 bytes each. Most metadata attributes should be stored at the NFT reference location itself.

**Backward Compatibility:** Existing NFT platforms essentially default to `type: ipfshash`. While this standard aims to free up the ecosystem from dependence on IPFS, it should also work with existing conventions that developed organically. To do so, **if you see an account with a lone `ipfshash` data entry, you may treat it as equivalent to an NFT account with `type: ipfshash`**.

##### IPFS Storage
If the `type` is `ipfshash`, the `ipfshash` key must point to an [IPFS Content IDentifier](https://docs.ipfs.io/concepts/content-addressing/) corresponding to the location of the metadata.

If you are the issuer, make sure you understand the implications of using IPFS. You must use an IPFS lookup service to actually resolve to the metadata. For example, [this URL](https://cloudflare-ipfs.com/ipfs/QmaydGEshbL7HMQkD6FZPcMeEt6o15aC4p4P82VxQ7amjy) resolves to the Meridian 2021 Hat NFT via the Cloudflare IPFS service. If you're the issuer, you must also ensure that IPFS actually stores your data (by running your own node or entrusting a provider).

##### URL Storage
If the `type` is `uri`, the corresponding `uri` key must point to a [valid URI](https://datatracker.ietf.org/doc/html/rfc3986) containing the NFT's metadata. 

_Note_: While you could technically describe metadata living on the IPFS with a URL by pointing to a specific node or a URI prefixing the CID with `ipfs://`, we recommend describing _only_ its CID to leave lookups to the users.

#### Standard Metadata Specification
This section describes the metadata itself rather than how to find it. 

The metadata must be valid JSON and must contain the following **required** fields:

| Field       | Description |
| ----------- | ----------- |
| name | a short name or title for the NFT |
| description | a longer, more-detailed description of the NFT |
| type | a [Media Type](https://www.iana.org/assignments/media-types/media-types.xhtml) describing the NFT's primary format (pointed to by `url`) |
| uri  | a [URI](https://datatracker.ietf.org/doc/html/rfc3986) pointing to the actual NFT contents |
| issuer | a Stellar public key ([`G...`](https://stellar.org/protocol/sep-23)) corresponding to the account which issued this NFT |
| code | the NFT's asset code |

For example,

```json
{
  "name": "A demonstration of NFT metadata",
  "description": "This is a description of the cool NFT used in this demo.",
  "type": "image/png",
  "uri": "https://cloudflare-ipfs.com/ipfs/QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco/I/m/RickAstleyNeverGonnaGiveYouUp7InchSingleCover.jpg",
  "issuer": "GALAXYVOIDAOPZTDLHILAJQKCVVFMD4IKLXLSZV5YHO7VY74IWZILUTO",
  "code": "DEMOASSET"
}
```

There are other fields which are **optional** but standardized:

| Field       | Description |
| ----------- | ----------- |
| fulldescription | an *even longer* description of the NFT than afforded by the `description` field, encoded in base64 |
| image | a [URI](https://datatracker.ietf.org/doc/html/rfc3986) pointing to an image representation of the NFT |
| video | a [URI](https://datatracker.ietf.org/doc/html/rfc3986) pointing to a video representation of the NFT |
| audio | a [URI](https://datatracker.ietf.org/doc/html/rfc3986) pointing to a audio representation of the NFT |
| domain | a [domain name](https://datatracker.ietf.org/doc/html/rfc1035#section-2.3.1) corresponding to a place that owns or renders this NFT | 

These fields should be self-explanatory.

### A Full Example
We start with an official SDF NFT: the [Meridian 2021 hat NFT](https://www.litemint.com/items/GDOA2FECYKBVG2RQYG5JQO6EBLCDBWZ7MFBEZY6AIBJ4NDXV3XEVCVBC/MERIDIAN2021). It's issued by [this account](https://horizon.stellar.org/accounts/GDOA2FECYKBVG2RQYG5JQO6EBLCDBWZ7MFBEZY6AIBJ4NDXV3XEVCVBC/) and stores the following entry in its `data` field:

```json
{
  "ipfshash": "UW1heWRHRXNoYkw3SE1Ra0Q2RlpQY01lRXQ2bzE1YUM0cDRQODJWeFE3YW1qeQ=="
}
```

Upon decoding the value from base64 (since a `ManageDataOp`'s value is just raw bytes), we get an IPFS CID:

    QmaydGEshbL7HMQkD6FZPcMeEt6o15aC4p4P82VxQ7amjy

Looking this up on IPFS [via CloudFlare](https://cloudflare-ipfs.com/ipfs/QmaydGEshbL7HMQkD6FZPcMeEt6o15aC4p4P82VxQ7amjy) gives us the full metadata:

```json
{
  "name": "Meridian 2021: Hat",
  "description": "Virtual swag from Meridian 2021!  Find out more about Meridian at https://meridian.stellar.org",
  "image": "ipfs://QmTAQ1e5zD4rxEspDgSZNgqXb73LBEj2wpQkDTj1UvCmv6",
  "url": "https://ipfs.io/ipfs/QmTAQ1e5zD4rxEspDgSZNgqXb73LBEj2wpQkDTj1UvCmv6",
  "code": "MERIDIAN2021",
  "issuer": "GDOA2FECYKBVG2RQYG5JQO6EBLCDBWZ7MFBEZY6AIBJ4NDXV3XEVCVBC",
  "domain": "meridian.litemint.store",
  "supply": 50,
  "video": "ipfs://QmeDxfvNpoizLxP4xLNrx1QuykPSqXEyZL8tVceZGudcvs"
}
```

We can see that this account [really does](https://horizon.stellar.org/operations/164563600389443587) own and issue this asset, meaning the NFT is genuine.

## Design Rationale
TODO.


## Security Concerns
While there are no direct security concerns to the network introduced by this SEP, the trust model of NFTs deserves some clarification.

Digital assets are infinitely and perfectly reproduceable by virtue of being digital. Thus, the goal of an NFT should **not** be to represent ownership or possession of a particular digital asset, but rather to represent the existence of a particular _relationship_ with the issuer.

Those processing an NFT should take care to ensure that the `issuer` field matches the account referencing the NFT, and that the `code` is in fact an asset issued by said account. Without these two links, you cannot make any conclusions about the NFT.


## Changelog
- `v0.1.0`: Initial draft ([#1000](https://github.com/stellar/stellar-protocol/pulls/1000)).
